# æŒ‰é¡ºåºå®Œæˆå¼‚æ­¥æ“ä½œ
ä¾æ¬¡è¿œç¨‹è¯»å–ä¸€ç»„ URLï¼Œç„¶åæŒ‰ç…§è¯»å–çš„é¡ºåºè¾“å‡ºç»“æœã€‚

## Promise
```
function logInOrder(urls){
    //è¿œç¨‹è¯»å–æ‰€æœ‰URL
    const textPromises = urls.map(url => {
        return fetch(url).then(response => response.text());
    });

    //æŒ‰æ¬¡åºè¾“å‡º
    textPromises.reduce((chain,textPromise)=>{
        return chain.then(()=>textPromise).then(
            text => console.log(text)
        );
    },Promise.resolve());
}
```
ä¸Šé¢ä»£ç ä½¿ç”¨fetchæ–¹æ³•ï¼ŒåŒæ—¶è¿œç¨‹è¯»å–ä¸€ç»„ URLã€‚æ¯ä¸ªfetchæ“ä½œéƒ½è¿”å›ä¸€ä¸ª Promise å¯¹è±¡ï¼Œæ”¾å…¥textPromisesæ•°ç»„ã€‚ç„¶åï¼Œreduceæ–¹æ³•ä¾æ¬¡å¤„ç†æ¯ä¸ª Promise å¯¹è±¡ï¼Œç„¶åä½¿ç”¨thenï¼Œå°†æ‰€æœ‰ Promise å¯¹è±¡è¿èµ·æ¥ï¼Œå› æ­¤å°±å¯ä»¥ä¾æ¬¡è¾“å‡ºç»“æœã€‚

## async
```
async function logInOrder(urls){
    for(const url of urls){
        const response = await fetch(url);
        console.log(await response.text());
    }
}
```
å¹¶å‘å‘å‡ºè¿œç¨‹è¯·æ±‚

```
async function logInOrder(urls){
    //å¹¶å‘è¯»å–è¿œç¨‹URL
    const textPromises = urls.map(async url => {
        const response = await fetch(url);
        return response.text();
    });

    //æŒ‰æ¬¡åºè¾“å‡º
    for(const textPromise of textPromises){
        console.log(await textPromise);
    }
}
```
ä¸Šé¢ä»£ç ä¸­ï¼Œè™½ç„¶mapæ–¹æ³•çš„å‚æ•°æ˜¯asyncå‡½æ•°ï¼Œä½†å®ƒæ˜¯å¹¶å‘æ‰§è¡Œçš„ï¼Œå› ä¸ºåªæœ‰asyncå‡½æ•°å†…éƒ¨æ˜¯ç»§å‘æ‰§è¡Œï¼Œå¤–éƒ¨ä¸å—å½±å“ã€‚åé¢çš„for..ofå¾ªç¯å†…éƒ¨ä½¿ç”¨äº†awaitï¼Œå› æ­¤å®ç°äº†æŒ‰é¡ºåºè¾“å‡ºã€‚

## æ›´å¤šå®ä¾‹
```
function who() {
  return new Promise(resolve => {
    setTimeout(() => {
      resolve('ğŸ¤¡');
    }, 200);
  });
}

function what() {
  return new Promise(resolve => {
    setTimeout(() => {
      resolve('lurks');
    }, 300);
  });
}

function where() {
  return new Promise(resolve => {
    setTimeout(() => {
      resolve('in the shadows');
    }, 500);
  });
}

async function msg() {
  const a = await who();
  const b = await what();
  const c = await where();

  console.log(`${ a } ${ b } ${ c }`);
}

msg(); // ğŸ¤¡ lurks in the shadows <-- after 1 second
```
> åœ¨ä¸Šé¢çš„ç¤ºä¾‹ä¸­ï¼Œæ¯ä¸ªæ­¥éª¤éƒ½æ˜¯æŒ‰é¡ºåºè¿›è¡Œçš„ï¼Œæ¯ä¸ªå…¶ä»–æ­¥éª¤éƒ½éœ€è¦å…ˆç­‰å¾…è¯¥æ­¥éª¤æ‰èƒ½è§£å†³æˆ–æ‹’ç»ï¼Œç„¶åå†ç»§ç»­ã€‚ ç›¸åï¼Œå¦‚æœæ‚¨å¸Œæœ›è¿™äº›æ­¥éª¤å¹¶è¡Œè¿›è¡Œï¼Œåˆ™å¯ä»¥ç®€å•åœ°ä½¿ç”¨Promise.allç­‰å¾…æ‰€æœ‰promiseéƒ½å®ç°ã€‚  

```
// ...

async function msg() {
  const [a, b, c] = await Promise.all([who(), what(), where()]);

  console.log(`${ a } ${ b } ${ c }`);
}

msg(); // ğŸ¤¡ lurks in the shadows <-- after 500ms
```